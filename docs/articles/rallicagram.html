<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>rallicagram • rallicagram</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="rallicagram">
<meta property="og:description" content="rallicagram">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rallicagram</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/rallicagram.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>rallicagram</h1>
            
      
      
      <div class="hidden name"><code>rallicagram.Rmd</code></div>

    </div>

    
    
<p><code>rallicagram</code> is a R wrapper for the <a href="https://regicid.github.io/api" class="external-link">Gallicagram API</a>. More info on
Gallicagram and its API can be found on a <a href="https://osf.io/preprints/socarxiv/84bf3/" class="external-link">preprint</a> by
Gallicagram developers <a href="https://regicid.github.io/" class="external-link">Benoît de
Courson</a> and <a href="https://benjamin-azoulay.my.canva.site/" class="external-link">Benjamin Azoulay</a>, on
the “Notice” tab of the <a href="https://shiny.ens-paris-saclay.fr/app/gallicagram" class="external-link">Gallicagram
website</a> and on the <a href="https://regicid.github.io/api" class="external-link">API
docuemntation</a>.</p>
<div class="section level2">
<h2 id="main-functions">Main functions<a class="anchor" aria-label="anchor" href="#main-functions"></a>
</h2>
<div class="section level3">
<h3 id="occurrences">Occurrences<a class="anchor" aria-label="anchor" href="#occurrences"></a>
</h3>
<p>The main function in this package, <code>gallicagram</code>, builds a
data frame with the yearly, monthly or daily proportion of mentions of a
term in one of the three corpora between two specified dates.</p>
<p>This function corresponds to the <code>Query</code> route of the <a href="https://regicid.github.io/api" class="external-link">API</a>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ex_occur</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gallicagram.html">gallicagram</a></span><span class="op">(</span></span>
<span>  keyword <span class="op">=</span> <span class="st">"président"</span>,</span>
<span>  corpus <span class="op">=</span> <span class="st">"lemonde"</span>,</span>
<span>  from <span class="op">=</span> <span class="fl">1960</span>,</span>
<span>  to <span class="op">=</span> <span class="fl">1970</span>,</span>
<span>  resolution <span class="op">=</span> <span class="st">"monthly"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Here is an example of part of the output:</p>
<table class="table">
<colgroup>
<col width="14%">
<col width="12%">
<col width="10%">
<col width="10%">
<col width="14%">
<col width="6%">
<col width="7%">
<col width="10%">
<col width="14%">
</colgroup>
<thead><tr class="header">
<th align="left">date</th>
<th align="left">keyword</th>
<th align="right">n_occur</th>
<th align="right">n_grams</th>
<th align="right">prop_occur</th>
<th align="right">year</th>
<th align="right">month</th>
<th align="left">source</th>
<th align="left">resolution</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1960-01-01</td>
<td align="left">président</td>
<td align="right">1338</td>
<td align="right">872943</td>
<td align="right">0.0015327</td>
<td align="right">1960</td>
<td align="right">1</td>
<td align="left">lemonde</td>
<td align="left">monthly</td>
</tr>
<tr class="even">
<td align="left">1960-02-01</td>
<td align="left">président</td>
<td align="right">1360</td>
<td align="right">915672</td>
<td align="right">0.0014852</td>
<td align="right">1960</td>
<td align="right">2</td>
<td align="left">lemonde</td>
<td align="left">monthly</td>
</tr>
<tr class="odd">
<td align="left">1960-03-01</td>
<td align="left">président</td>
<td align="right">1461</td>
<td align="right">928764</td>
<td align="right">0.0015731</td>
<td align="right">1960</td>
<td align="right">3</td>
<td align="left">lemonde</td>
<td align="left">monthly</td>
</tr>
<tr class="even">
<td align="left">1960-04-01</td>
<td align="left">président</td>
<td align="right">1239</td>
<td align="right">772707</td>
<td align="right">0.0016035</td>
<td align="right">1960</td>
<td align="right">4</td>
<td align="left">lemonde</td>
<td align="left">monthly</td>
</tr>
<tr class="odd">
<td align="left">1960-05-01</td>
<td align="left">président</td>
<td align="right">1355</td>
<td align="right">835612</td>
<td align="right">0.0016216</td>
<td align="right">1960</td>
<td align="right">5</td>
<td align="left">lemonde</td>
<td align="left">monthly</td>
</tr>
<tr class="even">
<td align="left">1960-06-01</td>
<td align="left">président</td>
<td align="right">1314</td>
<td align="right">850245</td>
<td align="right">0.0015454</td>
<td align="right">1960</td>
<td align="right">6</td>
<td align="left">lemonde</td>
<td align="left">monthly</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="occurences-for-all-copora-and-the-longest-period-possible">Occurences for all copora and the longest period possible<a class="anchor" aria-label="anchor" href="#occurences-for-all-copora-and-the-longest-period-possible"></a>
</h3>
<p>The function <code>gallicagram_all</code> enables to retrieve the
yearly proportion of occurrences of a keyword in each of the corpora for
the longest time range for which the data is available and reliable.</p>
<p>It only takes one parameter: the keyword of interest. It then calls
<code>gallicagram(keyword)</code> for each corpus and for the longest
period possible for the corpus and returns a data frame with the outcome
of each call.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/gallicagram_all.html">gallicagram_all</a></span><span class="op">(</span><span class="st">"président"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="co-occurrences">Co-occurrences<a class="anchor" aria-label="anchor" href="#co-occurrences"></a>
</h3>
<p><code>gallicagram_cooccur</code> builds a data frame with the yearly,
monthly or daily proportion of mentions of close co-occurrences of two
keywords in one of the three corpora between two specified dates.</p>
<p>Close co-occurrences correspond to the number of 3-grams (4-grams in
the <em>Le Monde</em> corpus) that contain the two keywords. This
function corresponds to the <code>Contain</code> route of the <a href="https://regicid.github.io/api" class="external-link">API</a>.</p>
<p>The parameters <code>keyword_1</code> and <code>keyword_2</code> take
the words to look co-occurrences for.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ex_cooccur</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gallicagram_cooccur.html">gallicagram_cooccur</a></span><span class="op">(</span></span>
<span>  keyword_1 <span class="op">=</span> <span class="st">"président"</span>,</span>
<span>  keyword_2 <span class="op">=</span> <span class="st">"république"</span>,</span>
<span>  corpus <span class="op">=</span> <span class="st">"lemonde"</span>,</span>
<span>  from <span class="op">=</span> <span class="fl">1960</span>,</span>
<span>  to <span class="op">=</span> <span class="fl">1970</span>,</span>
<span>  resolution <span class="op">=</span> <span class="st">"monthly"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Here is an example of part of the output:</p>
<table class="table">
<colgroup>
<col width="11%">
<col width="10%">
<col width="11%">
<col width="10%">
<col width="9%">
<col width="13%">
<col width="5%">
<col width="6%">
<col width="8%">
<col width="11%">
</colgroup>
<thead><tr class="header">
<th align="left">date</th>
<th align="left">keyword_1</th>
<th align="left">keyword_2</th>
<th align="right">n_cooccur</th>
<th align="right">n_ngrams</th>
<th align="right">prop_cooccur</th>
<th align="right">year</th>
<th align="right">month</th>
<th align="left">source</th>
<th align="left">resolution</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1960-01-01</td>
<td align="left">président</td>
<td align="left">république</td>
<td align="right">232</td>
<td align="right">575465</td>
<td align="right">0.0004032</td>
<td align="right">1960</td>
<td align="right">1</td>
<td align="left">lemonde</td>
<td align="left">monthly</td>
</tr>
<tr class="even">
<td align="left">1960-02-01</td>
<td align="left">président</td>
<td align="left">république</td>
<td align="right">295</td>
<td align="right">606116</td>
<td align="right">0.0004867</td>
<td align="right">1960</td>
<td align="right">2</td>
<td align="left">lemonde</td>
<td align="left">monthly</td>
</tr>
<tr class="odd">
<td align="left">1960-03-01</td>
<td align="left">président</td>
<td align="left">république</td>
<td align="right">287</td>
<td align="right">616477</td>
<td align="right">0.0004655</td>
<td align="right">1960</td>
<td align="right">3</td>
<td align="left">lemonde</td>
<td align="left">monthly</td>
</tr>
<tr class="even">
<td align="left">1960-04-01</td>
<td align="left">président</td>
<td align="left">république</td>
<td align="right">212</td>
<td align="right">513816</td>
<td align="right">0.0004126</td>
<td align="right">1960</td>
<td align="right">4</td>
<td align="left">lemonde</td>
<td align="left">monthly</td>
</tr>
<tr class="odd">
<td align="left">1960-05-01</td>
<td align="left">président</td>
<td align="left">république</td>
<td align="right">182</td>
<td align="right">552610</td>
<td align="right">0.0003293</td>
<td align="right">1960</td>
<td align="right">5</td>
<td align="left">lemonde</td>
<td align="left">monthly</td>
</tr>
<tr class="even">
<td align="left">1960-06-01</td>
<td align="left">président</td>
<td align="left">république</td>
<td align="right">196</td>
<td align="right">563800</td>
<td align="right">0.0003476</td>
<td align="right">1960</td>
<td align="right">6</td>
<td align="left">lemonde</td>
<td align="left">monthly</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="associations">Associations<a class="anchor" aria-label="anchor" href="#associations"></a>
</h3>
<p><code>gallicagram_associated</code> builds a data frame with the
words most frequently used preceding or following a given ngram over the
period.</p>
<p>For instance “camarade” is often followed by “staline” or
“khrouchtchev” in Le Monde. The function returns the most frequent
ngrams of the form “camarade *”. Setting <code>after = FALSE</code> also
includes the most frequent ngrams of the form “* camarade”.</p>
<p>The keyword can be a 2-gram in the “books” and “press” corpora and a
3-gram in the “lemonde” corpus. Searching the “press” corpus can require
a long running time. This function corresponds to the <code>Joker</code>
route of the <a href="https://regicid.github.io/api" class="external-link">API</a> and is
analogous to the <code>Joker</code> option on <a href="https://books.google.com/ngrams/" class="external-link">Ngram Viewer</a>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ex_associated</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gallicagram_associated.html">gallicagram_associated</a></span><span class="op">(</span></span>
<span>  keyword <span class="op">=</span> <span class="st">"camarade"</span>,</span>
<span>  corpus <span class="op">=</span> <span class="st">"lemonde"</span>,</span>
<span>  from <span class="op">=</span> <span class="fl">1960</span>,</span>
<span>  to <span class="op">=</span> <span class="fl">1970</span>,</span>
<span>  n_associated_words <span class="op">=</span> <span class="fl">10</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The terms most often associated with “camarade” are:</p>
<table class="table">
<colgroup>
<col width="10%">
<col width="30%">
<col width="21%">
<col width="12%">
<col width="10%">
<col width="6%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="right">n_occur</th>
<th align="left">ngram</th>
<th align="left">associated_word</th>
<th align="left">keyword</th>
<th align="left">corpus</th>
<th align="right">from</th>
<th align="right">to</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">256</td>
<td align="left">camarade de</td>
<td align="left">de</td>
<td align="left">camarade</td>
<td align="left">lemonde</td>
<td align="right">1960</td>
<td align="right">1970</td>
</tr>
<tr class="even">
<td align="right">124</td>
<td align="left">camarade khrouchtchev</td>
<td align="left">khrouchtchev</td>
<td align="left">camarade</td>
<td align="left">lemonde</td>
<td align="right">1960</td>
<td align="right">1970</td>
</tr>
<tr class="odd">
<td align="right">48</td>
<td align="left">camarade dubcek</td>
<td align="left">dubcek</td>
<td align="left">camarade</td>
<td align="left">lemonde</td>
<td align="right">1960</td>
<td align="right">1970</td>
</tr>
<tr class="even">
<td align="right">44</td>
<td align="left">camarade mao</td>
<td align="left">mao</td>
<td align="left">camarade</td>
<td align="left">lemonde</td>
<td align="right">1960</td>
<td align="right">1970</td>
</tr>
<tr class="odd">
<td align="right">41</td>
<td align="left">camarade et</td>
<td align="left">et</td>
<td align="left">camarade</td>
<td align="left">lemonde</td>
<td align="right">1960</td>
<td align="right">1970</td>
</tr>
<tr class="even">
<td align="right">31</td>
<td align="left">camarade waldeck</td>
<td align="left">waldeck</td>
<td align="left">camarade</td>
<td align="left">lemonde</td>
<td align="right">1960</td>
<td align="right">1970</td>
</tr>
<tr class="odd">
<td align="right">27</td>
<td align="left">camarade qui</td>
<td align="left">qui</td>
<td align="left">camarade</td>
<td align="left">lemonde</td>
<td align="right">1960</td>
<td align="right">1970</td>
</tr>
<tr class="even">
<td align="right">24</td>
<td align="left">camarade du</td>
<td align="left">du</td>
<td align="left">camarade</td>
<td align="left">lemonde</td>
<td align="right">1960</td>
<td align="right">1970</td>
</tr>
<tr class="odd">
<td align="right">23</td>
<td align="left">camarade togliatti</td>
<td align="left">togliatti</td>
<td align="left">camarade</td>
<td align="left">lemonde</td>
<td align="right">1960</td>
<td align="right">1970</td>
</tr>
<tr class="even">
<td align="right">22</td>
<td align="left">camarade staline</td>
<td align="left">staline</td>
<td align="left">camarade</td>
<td align="left">lemonde</td>
<td align="right">1960</td>
<td align="right">1970</td>
</tr>
</tbody>
</table>
<p>We can see that some elements of this list are stopwords. Since they
are not very informative, we may want to remove them. We can do that by
supplying a list of words to ignore to the <code>stopwords</code>
parameter of the function. For instance, we can use the list in the
<code>lsa</code> package, <code><a href="https://rdrr.io/pkg/lsa/man/stopwords.html" class="external-link">lsa::stopwords_fr</a></code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ex_associated_stopwords</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gallicagram_associated.html">gallicagram_associated</a></span><span class="op">(</span></span>
<span>  keyword <span class="op">=</span> <span class="st">"camarade"</span>,</span>
<span>  corpus <span class="op">=</span> <span class="st">"lemonde"</span>,</span>
<span>  from <span class="op">=</span> <span class="fl">1960</span>,</span>
<span>  to <span class="op">=</span> <span class="fl">1970</span>,</span>
<span>  n_associated_words <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  stopwords <span class="op">=</span> <span class="fu">lsa</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/lsa/man/stopwords.html" class="external-link">stopwords_fr</a></span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>The most often associated terms excluding stopwords are:</p>
<table class="table">
<colgroup>
<col width="10%">
<col width="30%">
<col width="21%">
<col width="12%">
<col width="10%">
<col width="6%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="right">n_occur</th>
<th align="left">ngram</th>
<th align="left">associated_word</th>
<th align="left">keyword</th>
<th align="left">corpus</th>
<th align="right">from</th>
<th align="right">to</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">124</td>
<td align="left">camarade khrouchtchev</td>
<td align="left">khrouchtchev</td>
<td align="left">camarade</td>
<td align="left">lemonde</td>
<td align="right">1960</td>
<td align="right">1970</td>
</tr>
<tr class="even">
<td align="right">48</td>
<td align="left">camarade dubcek</td>
<td align="left">dubcek</td>
<td align="left">camarade</td>
<td align="left">lemonde</td>
<td align="right">1960</td>
<td align="right">1970</td>
</tr>
<tr class="odd">
<td align="right">44</td>
<td align="left">camarade mao</td>
<td align="left">mao</td>
<td align="left">camarade</td>
<td align="left">lemonde</td>
<td align="right">1960</td>
<td align="right">1970</td>
</tr>
<tr class="even">
<td align="right">31</td>
<td align="left">camarade waldeck</td>
<td align="left">waldeck</td>
<td align="left">camarade</td>
<td align="left">lemonde</td>
<td align="right">1960</td>
<td align="right">1970</td>
</tr>
<tr class="odd">
<td align="right">23</td>
<td align="left">camarade togliatti</td>
<td align="left">togliatti</td>
<td align="left">camarade</td>
<td align="left">lemonde</td>
<td align="right">1960</td>
<td align="right">1970</td>
</tr>
<tr class="even">
<td align="right">22</td>
<td align="left">camarade staline</td>
<td align="left">staline</td>
<td align="left">camarade</td>
<td align="left">lemonde</td>
<td align="right">1960</td>
<td align="right">1970</td>
</tr>
</tbody>
</table>
<p>Note that excluding stopwords reduces the number of associated words
returned such that it does not correspond to
<code>nb_associated_words</code> anymore.</p>
</div>
</div>
<div class="section level2">
<h2 id="searching-several-keywords">Searching several keywords<a class="anchor" aria-label="anchor" href="#searching-several-keywords"></a>
</h2>
<p>In order to search several keywords at once, we can use the function
<code><a href="https://purrr.tidyverse.org/reference/map_dfr.html" class="external-link">purrr::map_dfr</a></code>. It takes as parameters the vector of
keywords to search, followed by the function (<code>gallicagram</code>)
and additional arguments to pass to the function. It returns a unique
data frame with the results for searches corresponding to each keyword,
basically binding the dataframes produced by each keyword search.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://purrr.tidyverse.org/" class="external-link">purrr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">keywords</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"république"</span>, <span class="st">"france"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map_dfr.html" class="external-link">map_dfr</a></span><span class="op">(</span><span class="va">keywords</span>, <span class="va">gallicagram</span>,</span>
<span>               corpus <span class="op">=</span> <span class="st">"lemonde"</span>, from <span class="op">=</span> <span class="st">"1960"</span>, to <span class="op">=</span> <span class="st">"1970"</span><span class="op">)</span></span></code></pre></div>
<p>Bbased on that same principle, we can run several searches at onces,
varying all parameters, not only the keyword searched. To do that, we
can specify the series of parameters in a data frame, each row
corresponding to a set of parameters to run the <code>gallicagram</code>
function for. We then pass this data frame to
<code><a href="https://purrr.tidyverse.org/reference/map_dfr.html" class="external-link">purrr::pmap_dfr</a></code>.</p>
<p>To specify the set of parameters, we can either build the parameters
data frame by hand. It is also often helpful to use
<code><a href="https://tidyr.tidyverse.org/reference/expand.html" class="external-link">tidyr::crossing</a></code> to create all combination of possible
searches.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">params_pmap</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>    from <span class="op">=</span> <span class="fl">1850</span>,</span>
<span>    to <span class="op">=</span> <span class="fl">1870</span>,</span>
<span>    resolution <span class="op">=</span> <span class="st">"yearly"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/expand.html" class="external-link">crossing</a></span><span class="op">(</span>corpus <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"press"</span>, <span class="st">"books"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/expand.html" class="external-link">crossing</a></span><span class="op">(</span>keyword <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"république"</span>, <span class="st">"france"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The corresponding set of parameters to search looks like this:</p>
<table class="table">
<thead><tr class="header">
<th align="right">from</th>
<th align="right">to</th>
<th align="left">resolution</th>
<th align="left">corpus</th>
<th align="left">keyword</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1850</td>
<td align="right">1870</td>
<td align="left">yearly</td>
<td align="left">books</td>
<td align="left">france</td>
</tr>
<tr class="even">
<td align="right">1850</td>
<td align="right">1870</td>
<td align="left">yearly</td>
<td align="left">books</td>
<td align="left">république</td>
</tr>
<tr class="odd">
<td align="right">1850</td>
<td align="right">1870</td>
<td align="left">yearly</td>
<td align="left">press</td>
<td align="left">france</td>
</tr>
<tr class="even">
<td align="right">1850</td>
<td align="right">1870</td>
<td align="left">yearly</td>
<td align="left">press</td>
<td align="left">république</td>
</tr>
</tbody>
</table>
<p>We can then pass it to <code><a href="https://purrr.tidyverse.org/reference/map_dfr.html" class="external-link">purrr::pmap_dfr</a></code> that will call
the function <code>gallicagram</code> for each of the 4 sets of
parameters defined in the rows of <code>params_pmap</code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map_dfr.html" class="external-link">pmap_dfr</a></span><span class="op">(</span><span class="va">params_pmap</span>, <span class="va">gallicagram</span><span class="op">)</span></span></code></pre></div>
<p>This method also apply for the other functions in the
<code>rallicagram</code> package.</p>
</div>
<div class="section level2">
<h2 id="graphs">Graphs<a class="anchor" aria-label="anchor" href="#graphs"></a>
</h2>
<p>One of the main usage of <code>Gallicagram</code> is to plot time
series of occurrences in a corpus. Here is an example graph using
<code>ggplot</code> (and my own ggplot theme <a href="https://vincentbagilet.github.io/mediocrethemes/" class="external-link"><code>mediocrethemes</code></a>.
The use of this theme is of course not mandatory and one can remove the
line <code><a href="https://vincentbagilet.github.io/mediocrethemes/reference/set_mediocre_all.html" class="external-link">mediocrethemes::set_mediocre_all()</a></code>):</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu">mediocrethemes</span><span class="fu">::</span><span class="fu"><a href="https://vincentbagilet.github.io/mediocrethemes/reference/set_mediocre_all.html" class="external-link">set_mediocre_all</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ex_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gallicagram.html">gallicagram</a></span><span class="op">(</span></span>
<span>  keyword <span class="op">=</span> <span class="st">"informatique"</span>,</span>
<span>  corpus <span class="op">=</span> <span class="st">"lemonde"</span>,</span>
<span>  from <span class="op">=</span> <span class="fl">1945</span>,</span>
<span>  to <span class="op">=</span> <span class="fl">2022</span>,</span>
<span>  resolution <span class="op">=</span> <span class="st">"yearly"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">ex_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">prop_occur</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Evolution of occurrences of 'computering' (informatique)"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"In the french newspaper Le Monde"</span>,</span>
<span>    x <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Proportion of occurrences"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="rallicagram_files/figure-html/raw_ts-1.png" width="70%" style="display: block; margin: auto;"></p>
<p>We can use <code>geom_smooth</code> to plot smoother lines. When
using the default loess smoothing, the parameter <code>span</code>
controls the amount of smoothing. Larger values are associated with less
smoothing. Here is the same graph but smoothed:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ex_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">prop_occur</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html" class="external-link">geom_smooth</a></span><span class="op">(</span>span <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Evolution of occurrences of 'computering' (informatique)"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"In the french newspaper Le Monde"</span>,</span>
<span>    x <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Proportion of occurrences"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; `geom_smooth()` using method = 'loess' and formula = 'y ~ x'</span></span></code></pre></div>
<p><img src="rallicagram_files/figure-html/smoothed_ts-1.png" width="70%" style="display: block; margin: auto;"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://vincentbagilet.github.io/" class="external-link">Vincent Bagilet</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
